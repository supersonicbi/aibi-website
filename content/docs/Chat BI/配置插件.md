+++
weight = 4
+++

## 1.1 创建插件 ##

{{< hint info >}}

关于插件的概念可参考[ChatBI 概念](https://supersonicbi.github.io/docs/chat-bi/%E6%A6%82%E5%BF%B5/)
{{< /hint >}}

打开SuperSonic首页，点击"插件管理" -> "新建插件"，即可新建插件，进行配置。如下图，在系统启动时，会默认创建两个demo插件，分别为Web页面和
Web服务两种类型的插件。

![image](/img/plugin_demo_list.png)

新建插件时需要填写以下信息：

![image](/img/web_plugin_demo_config.png)
<br>

**数据集**: 该插件所属的数据集, 当语义识别到对应的数据集时, 才可以召回对应数据集的插件, 如果选择"默认"数据集, 那么语义识别到任何主题域都可以召回该插件。

**插件名称**: 为该插件的名称, 用于标识一个插件

**插件类型**: 即为上面说的Web页面和Web服务两种

**函数名称**: 可以理解为该插件的英文名称, 该名称用来和LLM进行交互, 当LLM返回对应的函数名称时, 即为选中了该名称对应的插件(最新版本的插件召回基于向量库实现，暂无LLM实现)

**函数描述**: 可对函数的用途、用法等方面进行描述

**示例问题**: 用于生成向量, 是作为召回插件的重要依据

**地址**: 如果该插件为"Web网页"类型插件, 那么该地址就是网页的地址, 如果该插件为"WEB服务"类型的插件, 该地址就为该服务的HTTP地址，这个地址需要提前准备好

**函数参数**: 可以理解为页面/HTTP服务的参数以及与该参数绑定的维度, 比如这里填写的参数"name", 对应的是"超音数"数据集的"用户名"维度, 那么从"tom最近访问超音数情况怎么样" 这个文本中解析到"tom"之后, 就可以把tom作为"name"的参数

{{< hint warning >}}

需要注意的是，如果这里配置了维度类型的参数，则必须从文本中识别到了对应的维度值，才可以召回这个插件
{{< /hint >}}


**高度**: 可视化选项, 如果是"Web网页" 类型的插件, 该高度为该网页展示在会话列表所占用的高度, 需要根据实际情况进行微调。
<br>

## 1.2 插件使用

若想在问答中使用到插件，需要在助理中进行工具的配置，如下图，在助理中，可以通过第三方插件的方式进行插件添加:


![image](/img/add_plugin.png)

## 1.3 插件效果 ## 

### 1.3.1 Web 页面效果展示 ### 

下面以插件"艺人趋势解读"作为Web页面的demo展示。
当用户选择插件所属的数据集"问答艺人数据集", 并输入问题"林俊杰近期音乐表现如何"。超音数会将分析该问题, 最后召回"艺人趋势解读"插件，插件主要配置信息如下:

![image](/img/plugin_demo1.png)

在我们的场景中,最终会将一个解读报告的页面渲染到当前问答会话列表，效果如下:

![image](/img/plugin_web_result.jpg)


### 1.3.2  Web 服务效果展示 ### 

下面以插件"版权知识库"作为Web服务的demo展示。该插件被召回后，将会请求一个HTTP接口，并把HTTP接口返回的结果展示到页面上:

![image](/img/plugin_service_config.jpg)

在"问答对话"中选择版权知识库助理后，输入以下问题："请介绍一下什么是音乐作品"。此后，超音数通过插件召回, 将问题文本作为输入参数，发送给"地址"对应的Web服务, 最终获取对应的查询结果在界面上作展示。
在我们的场景中,最终会将Web服务的输出展示到当前问答会话列表, 具体效果如下:

![image](/img/plugin_service_result.jpg)


## FAQ

### 1. 为什么我创建了插件，但是在问答的时候没有被召回?

  a. 可能向量库没有正确连接

  b. 没有把插件作为第三方工具加入到助理中

  c. 插件配置了参数，但是没有从文本中识别到对应的参数值

### 2. WEB页面类型的插件，如何把识别到的参数值传入到页面中?
当前识别到插件的参数值后，会把识别到的参数值返回给前端，可由前端继续拼接链接传入到页面中

### 3. WEB服务类型的插件，所需要的HTTP接口参数是什么样的?
可以参考PluginController.pluginDemo这个接口




